export const products = [
  {
    id: 1,
    image:
      "https://product.hstatic.net/200000690725/product/esbs004-3_9ac927e29e094478a1a2822eac78ee68_master.jpg",
    price: 550000,
    name: "Quần polo 1",
    category: "trousers",
    saleprice: 500.0,
    isSale: true,
    sold: 1000,
  },
  {
    id: 2,
    image:
      "https://product.hstatic.net/200000690725/product/1_9629d9533d524918936728426ca5a3d3_master.jpg",
    price: 550000,
    name: "Quần polo 2",
    category: "trousers",
    saleprice: 500.0,
    isSale: true,
    sold: 10,
  },
  {
    id: 3,
    image:
      "https://product.hstatic.net/200000690725/product/tp644---bj901-_15__afb1d3be372e49b7a6c02ace946c9dd7_master.jpg",
    price: 550000,
    name: "Quần polo 3",
    category: "trousers",
    saleprice: 500.0,
    isSale: false,
    sold: 10,
  },
  {
    id: 4,
    image:
      "https://product.hstatic.net/200000690725/product/eabk022-1_dc331ee2a8a34003988c96ddbde59352_master.jpg",
    price: 340000,
    name: "Quần polo 4",
    category: "trousers",
    saleprice: 500.0,
    isSale: false,
    sold: 10,
  },
  {
    id: 5,
    image:
      "https://product.hstatic.net/200000690725/product/b_d29e6bdf78d04be1aa1575b44e69b2fb_master.jpg",
    price: 340000,
    name: "Quần polo 4",
    category: "trousers",
    saleprice: 500.0,
    sold: 10,
    isSale: false,
  },
  {
    id: 6,
    image:
      "https://product.hstatic.net/200000690725/product/esbw004-12_52899473574_o_36fe3a92153a417b89b69bf2ce2d1490_master.jpg",
    price: 340000,
    name: "Quần polo 5",
    category: "trousers",
    saleprice: 500.0,
    sold: 10,
    isSale: false,
  },
  {
    id: 7,
    image:
      "https://product.hstatic.net/200000690725/product/z4375871634006_3c6f0e8fa25b1738560ea149ea81b38d_fbd07c7537b644268bd5eeb3e637ed3b_master.jpg",
    price: 360000,
    name: "Quần polo 6",
    category: "trousers",
    saleprice: 500.0,
    isSale: false,
    sold: 10,
  },
  {
    id: 8,
    image:
      "https://product.hstatic.net/200000690725/product/52758571717_57bc84c9b4_o_33dddd52dbfd4030a439a6f62ffe8bf1_master.jpg",
    price: 800000,
    name: "Quần polo 7",
    category: "trousers",
    saleprice: 500.0,
    isSale: false,
    sold: 10,
  },
  {
    id: 9,
    image:
      "https://product.hstatic.net/200000690725/product/52933853176_7967f42e52_o_208bdabebdb14986a84a5ed6be961474_master.jpg",
    price: 30000,
    name: "Quần polo 8",
    category: "trousers",
    saleprice: 500000,
    isSale: false,
    sold: 10,
  },
  {
    id: 10,
    image:
      "https://product.hstatic.net/200000690725/product/tp038---bk908-_20__de063447c1d34cf0a62c34b18ed2ffe6_master.jpg",
    price: 900000,
    name: "Quần polo 9",
    category: "trousers",
    saleprice: 500.0,
    isSale: false,
    sold: 10,
  },
  {
    id: 11,
    image:
      "https://product.hstatic.net/200000690725/product/estp041-16_4cb9d42d84e7436884bd3f4e648621ed_master.jpg",
    price: 900000,
    name: "Áo Polo",
    category: "shirt",
    saleprice: 500.0,
    isSale: false,
    sold: 10,
  },
  {
    id: 12,
    image:
      "https://product.hstatic.net/200000690725/product/b_24593f7f476f48a1b9f6ea09a0c448e8_master.jpg",
    price: 900000,
    name: "Áo Polo",
    category: "shirt",
    saleprice: 500.0,
    isSale: false,
    sold: 10,
  },
  {
    id: 13,
    image:
      "https://product.hstatic.net/200000690725/product/estp038-1_176f920958b14ad3bfa6ec9229951141_master.jpg",
    price: 900000,
    name: "Áo Polo",
    category: "shirt",
    saleprice: 500.0,
    isSale: false,
    sold: 10,
  },
  {
    id: 14,
    image:
      "https://product.hstatic.net/200000690725/product/eatb006-1_802efda9723841d59eb56fabb46d7b22_master.jpg",
    price: 900000,
    name: "Áo Polo",
    category: "shirt",
    saleprice: 500.0,
    isSale: false,
    sold: 10,
  },
  {
    id: 15,
    image:
      "https://product.hstatic.net/200000690725/product/ests019-1_43439ad073b144e1aefde0263510319b_master.jpg",
    price: 900000,
    name: "Áo Polo",
    category: "shirt",
    saleprice: 500.0,
    isSale: false,
    sold: 900000,
  },
  {
    id: 16,
    image:
      "https://product.hstatic.net/200000690725/product/tb906---bj012-_9__d5b1c5afdf4744908b28b0339aa36036_master.jpg",
    price: 900000,
    name: "Áo Polo",
    category: "shirt",
    saleprice: 500.0,
    isSale: false,
    sold: 10,
  },
  {
    id: 17,
    image:
      "https://product.hstatic.net/200000690725/product/20220916_ya0hnmgf0o4pibssy9iti4su_118cdff5d2664ea4af32eea292c9e2b3_master.jpg",
    price: 900000,
    name: "Áo Polo",
    category: "shirt",
    saleprice: 500.0,
    isSale: false,
    sold: 10,
  },
  {
    id: 18,
    image:
      "https://product.hstatic.net/200000690725/product/ewcw007-1_c8b1f230ddb2408daa72728d0ecee531_master.jpg",
    price: 180000,
    name: "Áo Polo",
    category: "shirt",
    saleprice: 500.0,
    isSale: false,
    sold: 23,
  },
  {
    id: 19,
    image:
      "https://product.hstatic.net/200000690725/product/a_c11e97a5799c434fbe1eb35e043c1639_master.jpg",
    price: 180000,
    name: "Áo Polo",
    category: "shirt",
    saleprice: 500.0,
    isSale: false,
    sold: 10,
  },
  {
    id: 20,
    image:
      "https://product.hstatic.net/200000690725/product/1_4554a899fc974e40bc58638b060b31ee_master.jpg",
    price: 220000,
    name: "Áo Polo",
    category: "shirt",
    saleprice: 500.0,
    isSale: false,
    sold: 10,
  },
  {
    id: 21,
    image:
      "https://product.hstatic.net/200000690725/product/1_4554a899fc974e40bc58638b060b31ee_master.jpg",
    price: 400000,
    name: "Áo Polo",
    category: "shirt",
    saleprice: 500.0,
    isSale: false,
    sold: 10,
  },
  {
    id: 22,
    image: "./accests/images/aopolo.webp",
    name: "Áo polo",
    saleprice: 500,
    price: 199000,
    isSale: true,
    sold: 120,
    category: "shirt",
  },
  {
    id: 23,
    image: "./accests/images/aothun.webp",
    name: "Áo polo",
    saleprice: 500,
    price: 199000,
    isSale: true,
    sold: 10,
    category: "shirt",
  },
  {
    id: 24,
    image: "./accests/images/quankhaki.webp",
    name: "Áo polo",
    saleprice: 500,
    price: 199000,
    isSale: true,
    sold: 10,
    category: "shirt",
  },
  {
    id: 25,
    image: "./accests/images/somi.webp",
    name: "Áo polo",
    saleprice: 500,
    price: 199000,
    isSale: true,
    sold: 100,
    category: "shirt",
  },
  {
    id: 26,
    image: "./accests/images/aopolo.webp",
    name: "Áo polo",
    saleprice: 500,
    price: 199000,
    isSale: true,
    sold: 10,
    category: "shirt",
  },
];
import { renderCart as rendercartStore } from "./cartStore.js";
const cartElement = document.getElementById("cart-container");
const listCart = document.getElementById("items-list");
const totalCart = document.getElementById("total-cart");
const countCartElement = document.getElementById("count-cart");
const deliveryFree = document.getElementById("delivery-free");
export const countItemCategory = () => {
  isTrousers
    ? (countItemCategory.innerHTML = 200)
    : (countItemCategory.innerHTML = 100);
};

///format number more 1000
export const numberWithCommas = (x) => {
  return x?.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
};

const setCountCart = () => {
  countCartElement.innerHTML = "";
  const dataFromLocal = JSON.parse(localStorage.getItem("cart"));
  if (dataFromLocal) {
    const count = dataFromLocal.length;
    const div = document.createElement("div");
    div.innerHTML = `<span>${count}</span>`;
    countCartElement.appendChild(div);
  }
};
//render order
export const renderCart = () => {
  const list = JSON.parse(localStorage.getItem("cart")) ?? [s];
  [...list].forEach((item) => {
    const { id, image, name, price, saleprice, quanlity } = item;
    const div = document.createElement("div");
    div.classList.add("cart-detail-item");
    div.innerHTML = `<div id="item-cart" style="display: flex;justify-content: space-between;padding-bottom: 10px;">
        <div style="display: flex;">
            <img src=${image} style="width:75px ;height: 90px;" alt="">
            <div style="margin-left: 10px;display: flex;flex-direction: column;justify-content: space-between;">
                <h7 style="font-weight: 600;">${name}</h7>
                <span style="opacity: 0.8;">Đen/Cotton/31</span>
                <div>
                    <i class="fa-solid fa-minus" style="cursor: pointer;"></i>
                    <span style="margin-left: 4px;margin-right: 4px;">${quanlity}</span>
                    <i class="fa-solid fa-plus" style="cursor: pointer;"></i>
                </div>
            </div>
        </div>
        <div  style="display: flex;flex-direction: column;justify-content: space-between;position: relative;width: 90px;">
            <i class="fa-solid fa-x remove-product" style="position: absolute;right: 0;top: 0;cursor: pointer;"></i>
            <span style="font-weight: 600; position: absolute;right: 5px;bottom: 0;">${price} đ</span>
        </div>
    </div>`;
    listCart.appendChild(div);
    div
      .querySelector(".remove-product")
      .addEventListener("click", () => removeProductForLocalStorage(item));
  });
  totalShopping();
};

// them san pham vao gio hang
export const addProductForLocalStorage = async (products) => {
  cartElement.className = "hide";
  const dataFromLocal = JSON.parse(localStorage.getItem("cart")) ?? [];
  //k co trong gio hang
  if (!dataFromLocal?.find((item) => item.id === products.id)) {
    listCart.innerHTML = "";
    const newData = [...dataFromLocal, { ...products, quanlity: 1 }];
    localStorage.setItem("cart", JSON.stringify(newData));
    renderCart();
    setCountCart();
  } else {
    // co thi cong trong gio hang them 1 neu bam vao them vao gio hang
    alert("Bạn đã thêm sản phẩm này vào giỏ hàng");
  }
  setCountCart();
  isDeliveryFree();
};
// xoa san pham vao gio hang
export const removeProductForLocalStorage = (product) => {
  const dataFromLocal = JSON.parse(localStorage.getItem("cart"));
  listCart.innerHTML = "";
  localStorage.setItem(
    "cart",
    JSON.stringify(dataFromLocal.filter((item) => item.id !== product.id))
  );
  rendercartStore();
  setCountCart();
  isDeliveryFree();
};
//tinh tong tien gio hang
export const totalShopping = () => {
  let total = 0;
  const dataFromLocal = JSON.parse(localStorage.getItem("cart"));
  if (dataFromLocal) {
    total = dataFromLocal.reduce((tong, item) => {
      // 1 phuong thuc tinh tong cac phan tu trong mang
      return tong + item.price * item.quanlity;
    }, 0);
  }
  if (totalCart) {
    totalCart.innerHTML = "";
    const div = document.createElement("div");
    div.innerHTML = `${numberWithCommas(total)}` ?? "";
    totalCart?.appendChild(div);
  }
  // totalCart?.innerHTML = "213525"
  // totalCart?.innerHTML = `${numberWithCommas(total)}` ?? '';
  return total;
};

// kiem tra co duoc mien phi ship hay k

export const isDeliveryFree = () => {
  deliveryFree.innerHTML = "";
  const total = Number(totalShopping());
  const div = document.createElement("div");
  if (total >= 500000) {
    div.innerHTML = `<div style="margin-bottom: 10px;">
        <span>Bạn đã được <b>Miễn phí vận chuyển</b></span>
        <img src="./accests/images/delivery.jpg" style="width: 100%;" alt="">
    </div>`;
  } else if (total > 0 && total < 500000) {
    div.innerHTML = `<div style="margin-bottom: 10px;">
      <span>Bạn cần mua thêm <b style="color:red;">${numberWithCommas(
        500000 - total
      )}</b> <b>để được MIỄN PHÍ VẬN CHUYỂN</b></span>
          </div>`;
  } else {
    div.innerHTML = "";
  }
  deliveryFree.appendChild(div);
};
